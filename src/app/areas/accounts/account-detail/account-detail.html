<navbar>
  <app-header></app-header>
</navbar>

<main>
  <section class="container account-detail">
    <div class="row">
      <div class="col-sm-9 account-header">
        <div class="section">
          <div class="row">
            <div class="col-sm-12">
              <span class="meta">
                <editable-field
                  admin="$ctrl.userIsAdmin"
                  data="$ctrl.account.country"
                  update-field="$ctrl.updateAccount()"
                  options="['USA','Canada','Other']"
                ></editable-field>
              </span>
              <h1>
                {{::$ctrl.account.name}}
                <small class="value">
                  <editable-field
                    admin="$ctrl.userIsAdmin"
                    data="$ctrl.account.value"
                    update-field="$ctrl.updateAccount()"
                    format="currency"
                  ></editable-field>
                </small>
              </h1>
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-3 account-sidebar">
        <div class="row">
          <div class="col-sm-12">
            <ul class="list-unstyled mt-xl">
              <li class="mb-sm">
                <editable-field
                  admin="$ctrl.userIsAdmin"
                  data="$ctrl.account.accountType"
                  update-field="$ctrl.updateAccount()"
                  type="label"
                  options="['Current customer', 'Prospect in-cycle', 'Prospect loss', 'Lost customer']"
                ></editable-field>
              </li>
              <li>
                <strong>Platform:</strong>&nbsp;
                <span ng-repeat="platform in $ctrl.account.platform">
                  {{platform}}<span ng-if="!$last">, </span>
                </span>
              </li>
              <li>
                <strong>Account ID:</strong>&nbsp;
                <editable-field
                  admin="$ctrl.userIsAdmin"
                  data="$ctrl.account.cid"
                  update-field="$ctrl.updateAccount()"
                ></editable-field>
              </li>
              <li class="mt-sm mb-sm">
                <editable-field
                  admin="$ctrl.userIsAdmin"
                  data="$ctrl.account.salesForceUrl"
                  update-field="$ctrl.updateAccount()"
                  type="button"
                  button-text="View in Salesforce"
                ></editable-field>

                <input
                  ng-if="!$ctrl.account.salesForceUrl"
                  class="form-control input-xs"
                  placeholder="Add Salesforce Url"
                />
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="container">
    <!--todo: make this modular-->
    <div class="section-header" ng-class="{'closed':!$ctrl.showFeatureSummary}" ng-click="$ctrl.showFeatureSummary = !$ctrl.showFeatureSummary">
      <h4>Feature Request Summary</h4>
    </div>
    <div class="col-sm-12" ng-show="$ctrl.showFeatureSummary">
      <feature-list
        admin="$ctrl.userIsAdmin"
        features="$ctrl.account.features"
        account-id="$ctrl.account.$id"
      ></feature-list>
    </div>
  </section>
</main>